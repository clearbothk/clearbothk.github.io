(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{HHba:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return k})),n.d(t,"b",(function(){return M}));var o=n("mrSG"),s=n("phcG"),i=n("CsZ0"),a=n("lR8r"),c=n("STt+"),r=n("0AlL"),d=n("3L1f"),l=n("wMBm"),u=n("5d6V"),b=n("HgU/"),p=n("PG36"),O=n("/La1"),h=n("+uk7"),g=n("hYkj"),f=n("TQNI"),v=n("rGbN"),j=n("ElnS"),C=n("ZcaK"),m=n("MYxB"),y=n("C9yC"),S=n("qw/L"),w=n("k+WF"),N=n("cK9x"),P=n("EsD3"),B=n("f7gG"),x=n("5biV"),U=n("Sk7f"),A=n("V4UQ"),k=function(t){function n(e,n,o,c){var r,d,l,O=this;if(c=c||{},n instanceof m.a)l=e,d=n;else if(s.d&&n instanceof b.a||n instanceof u.a||Object(i.a)(n))l=e,c=o,d=Object(m.b)(n,c);else if(n||"string"==typeof n){if(!n||"string"!=typeof n||!o||"string"!=typeof o)throw new Error("Expecting non-empty strings for containerName and blobName parameters");var h=n,g=o,f=Object(U.d)(e);if("AccountConnString"===f.kind){if(!s.d)throw new Error("Account connection string is only supported in Node.js environment");var v=new b.a(f.accountName,f.accountKey);l=Object(U.a)(Object(U.a)(f.url,encodeURIComponent(h)),encodeURIComponent(g)),c.proxyOptions=Object(a.a)(f.proxyUri),d=Object(m.b)(v,c)}else{if("SASConnString"!==f.kind)throw new Error("Connection string must be either an Account connection string or a SAS connection string");l=Object(U.a)(Object(U.a)(f.url,encodeURIComponent(h)),encodeURIComponent(g))+"?"+f.accountSas,d=Object(m.b)(new u.a,c)}}else l=e,d=Object(m.b)(new u.a,c);return r=(O=t.call(this,l,d)||this).getBlobAndContainerNamesFromUrl(),O._name=r.blobName,O._containerName=r.containerName,O.blobContext=new p.a(O.storageClientContext),O}return Object(o.g)(n,t),Object.defineProperty(n.prototype,"name",{get:function(){return this._name},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"containerName",{get:function(){return this._containerName},enumerable:!1,configurable:!0}),n.prototype.withSnapshot=function(e){return new n(Object(U.n)(this.url,B.t.Parameters.SNAPSHOT,0===e.length?void 0:e),this.pipeline)},n.prototype.withVersion=function(e){return new n(Object(U.n)(this.url,B.t.Parameters.VERSIONID,0===e.length?void 0:e),this.pipeline)},n.prototype.getAppendBlobClient=function(){return new I(this.url,this.pipeline)},n.prototype.getBlockBlobClient=function(){return new T(this.url,this.pipeline)},n.prototype.getPageBlobClient=function(){return new R(this.url,this.pipeline)},n.prototype.download=function(e,t,n){var i;return void 0===e&&(e=0),void 0===n&&(n={}),Object(o.f)(this,void 0,void 0,(function(){var a,c,l,u,b,p,O=this;return Object(o.h)(this,(function(h){switch(h.label){case 0:n.conditions=n.conditions||{},n.conditions=n.conditions||{},Object(j.a)(n.customerProvidedKey,this.isHttps),a=Object(x.a)("BlobClient-download",n.tracingOptions),c=a.span,l=a.spanOptions,h.label=1;case 1:return h.trys.push([1,3,4,5]),[4,this.blobContext.download({abortSignal:n.abortSignal,leaseAccessConditions:n.conditions,modifiedAccessConditions:Object(o.a)(Object(o.a)({},n.conditions),{ifTags:null===(i=n.conditions)||void 0===i?void 0:i.tagConditions}),onDownloadProgress:s.d?void 0:n.onProgress,range:0!==e||t?Object(S.a)({offset:e,count:t}):void 0,rangeGetContentMD5:n.rangeGetContentMD5,rangeGetContentCRC64:n.rangeGetContentCrc64,snapshot:n.snapshot,cpkInfo:n.customerProvidedKey,spanOptions:l})];case 2:if(u=h.sent(),b=Object(o.a)(Object(o.a)({},u),{_response:u._response,objectReplicationDestinationPolicyId:u.objectReplicationPolicyId,objectReplicationSourceProperties:Object(U.l)(u.objectReplicationRules)}),!s.d)return[2,b];if((void 0===n.maxRetryRequests||n.maxRetryRequests<0)&&(n.maxRetryRequests=B.g),void 0===u.contentLength)throw new RangeError("File download response doesn't contain valid content length header");if(!u.etag)throw new RangeError("File download response doesn't contain valid etag header");return[2,new d.a(b,(function(t){return Object(o.f)(O,void 0,void 0,(function(){var s,i;return Object(o.h)(this,(function(a){switch(a.label){case 0:return s={leaseAccessConditions:n.conditions,modifiedAccessConditions:{ifMatch:n.conditions.ifMatch||u.etag,ifModifiedSince:n.conditions.ifModifiedSince,ifNoneMatch:n.conditions.ifNoneMatch,ifUnmodifiedSince:n.conditions.ifUnmodifiedSince,ifTags:null===(i=n.conditions)||void 0===i?void 0:i.tagConditions},range:Object(S.a)({count:e+u.contentLength-t,offset:t}),rangeGetContentMD5:n.rangeGetContentMD5,rangeGetContentCRC64:n.rangeGetContentCrc64,snapshot:n.snapshot,cpkInfo:n.customerProvidedKey},[4,this.blobContext.download(Object(o.a)({abortSignal:n.abortSignal},s))];case 1:return[2,a.sent().readableStreamBody]}}))}))}),e,u.contentLength,{abortSignal:n.abortSignal,maxRetryRequests:n.maxRetryRequests,onProgress:n.onProgress})];case 3:throw p=h.sent(),c.setStatus({code:r.CanonicalCode.UNKNOWN,message:p.message}),p;case 4:return c.end(),[7];case 5:return[2]}}))}))},n.prototype.exists=function(e){return void 0===e&&(e={}),Object(o.f)(this,void 0,void 0,(function(){var t,n,s,i;return Object(o.h)(this,(function(a){switch(a.label){case 0:t=Object(x.a)("BlobClient-exists",e.tracingOptions),n=t.span,s=t.spanOptions,a.label=1;case 1:return a.trys.push([1,3,4,5]),Object(j.a)(e.customerProvidedKey,this.isHttps),[4,this.getProperties({abortSignal:e.abortSignal,customerProvidedKey:e.customerProvidedKey,conditions:e.conditions,tracingOptions:Object(o.a)(Object(o.a)({},e.tracingOptions),{spanOptions:s})})];case 2:return a.sent(),[2,!0];case 3:if(404===(i=a.sent()).statusCode)return n.setStatus({code:r.CanonicalCode.NOT_FOUND,message:"Expected exception when checking blob existence"}),[2,!1];throw n.setStatus({code:r.CanonicalCode.UNKNOWN,message:i.message}),i;case 4:return n.end(),[7];case 5:return[2]}}))}))},n.prototype.getProperties=function(e){var t;return void 0===e&&(e={}),Object(o.f)(this,void 0,void 0,(function(){var n,s,i,a,c;return Object(o.h)(this,(function(d){switch(d.label){case 0:n=Object(x.a)("BlobClient-getProperties",e.tracingOptions),s=n.span,i=n.spanOptions,d.label=1;case 1:return d.trys.push([1,3,4,5]),e.conditions=e.conditions||{},Object(j.a)(e.customerProvidedKey,this.isHttps),[4,this.blobContext.getProperties({abortSignal:e.abortSignal,leaseAccessConditions:e.conditions,modifiedAccessConditions:Object(o.a)(Object(o.a)({},e.conditions),{ifTags:null===(t=e.conditions)||void 0===t?void 0:t.tagConditions}),cpkInfo:e.customerProvidedKey,spanOptions:i})];case 2:return a=d.sent(),[2,Object(o.a)(Object(o.a)({},a),{_response:a._response,objectReplicationDestinationPolicyId:a.objectReplicationPolicyId,objectReplicationSourceProperties:Object(U.l)(a.objectReplicationRules)})];case 3:throw c=d.sent(),s.setStatus({code:r.CanonicalCode.UNKNOWN,message:c.message}),c;case 4:return s.end(),[7];case 5:return[2]}}))}))},n.prototype.delete=function(e){var t;return void 0===e&&(e={}),Object(o.f)(this,void 0,void 0,(function(){var n,s,i,a;return Object(o.h)(this,(function(c){switch(c.label){case 0:n=Object(x.a)("BlobClient-delete",e.tracingOptions),s=n.span,i=n.spanOptions,e.conditions=e.conditions||{},c.label=1;case 1:return c.trys.push([1,3,4,5]),[4,this.blobContext.deleteMethod({abortSignal:e.abortSignal,deleteSnapshots:e.deleteSnapshots,leaseAccessConditions:e.conditions,modifiedAccessConditions:Object(o.a)(Object(o.a)({},e.conditions),{ifTags:null===(t=e.conditions)||void 0===t?void 0:t.tagConditions}),spanOptions:i})];case 2:return[2,c.sent()];case 3:throw a=c.sent(),s.setStatus({code:r.CanonicalCode.UNKNOWN,message:a.message}),a;case 4:return s.end(),[7];case 5:return[2]}}))}))},n.prototype.deleteIfExists=function(e){var t,n;return void 0===e&&(e={}),Object(o.f)(this,void 0,void 0,(function(){var s,i,a,c,d;return Object(o.h)(this,(function(l){switch(l.label){case 0:s=Object(x.a)("BlobClient-deleteIfExists",e.tracingOptions),i=s.span,a=s.spanOptions,l.label=1;case 1:return l.trys.push([1,3,4,5]),[4,this.delete(Object(o.a)(Object(o.a)({},e),{tracingOptions:Object(o.a)(Object(o.a)({},e.tracingOptions),{spanOptions:a})}))];case 2:return c=l.sent(),[2,Object(o.a)(Object(o.a)({succeeded:!0},c),{_response:c._response})];case 3:if(d=l.sent(),"BlobNotFound"===(null===(t=d.details)||void 0===t?void 0:t.errorCode))return i.setStatus({code:r.CanonicalCode.NOT_FOUND,message:"Expected exception when deleting a blob or snapshot only if it exists."}),[2,Object(o.a)(Object(o.a)({succeeded:!1},null===(n=d.response)||void 0===n?void 0:n.parsedHeaders),{_response:d.response})];throw i.setStatus({code:r.CanonicalCode.UNKNOWN,message:d.message}),d;case 4:return i.end(),[7];case 5:return[2]}}))}))},n.prototype.undelete=function(e){return void 0===e&&(e={}),Object(o.f)(this,void 0,void 0,(function(){var t,n,s,i;return Object(o.h)(this,(function(o){switch(o.label){case 0:t=Object(x.a)("BlobClient-undelete",e.tracingOptions),n=t.span,s=t.spanOptions,o.label=1;case 1:return o.trys.push([1,3,4,5]),[4,this.blobContext.undelete({abortSignal:e.abortSignal,spanOptions:s})];case 2:return[2,o.sent()];case 3:throw i=o.sent(),n.setStatus({code:r.CanonicalCode.UNKNOWN,message:i.message}),i;case 4:return n.end(),[7];case 5:return[2]}}))}))},n.prototype.setHTTPHeaders=function(e,t){var n;return void 0===t&&(t={}),Object(o.f)(this,void 0,void 0,(function(){var s,i,a,c;return Object(o.h)(this,(function(d){switch(d.label){case 0:s=Object(x.a)("BlobClient-setHTTPHeaders",t.tracingOptions),i=s.span,a=s.spanOptions,t.conditions=t.conditions||{},d.label=1;case 1:return d.trys.push([1,3,4,5]),Object(j.a)(t.customerProvidedKey,this.isHttps),[4,this.blobContext.setHTTPHeaders({abortSignal:t.abortSignal,blobHTTPHeaders:e,leaseAccessConditions:t.conditions,modifiedAccessConditions:Object(o.a)(Object(o.a)({},t.conditions),{ifTags:null===(n=t.conditions)||void 0===n?void 0:n.tagConditions}),cpkInfo:t.customerProvidedKey,spanOptions:a})];case 2:return[2,d.sent()];case 3:throw c=d.sent(),i.setStatus({code:r.CanonicalCode.UNKNOWN,message:c.message}),c;case 4:return i.end(),[7];case 5:return[2]}}))}))},n.prototype.setMetadata=function(e,t){var n;return void 0===t&&(t={}),Object(o.f)(this,void 0,void 0,(function(){var s,i,a,c;return Object(o.h)(this,(function(d){switch(d.label){case 0:s=Object(x.a)("BlobClient-setMetadata",t.tracingOptions),i=s.span,a=s.spanOptions,t.conditions=t.conditions||{},d.label=1;case 1:return d.trys.push([1,3,4,5]),Object(j.a)(t.customerProvidedKey,this.isHttps),[4,this.blobContext.setMetadata({abortSignal:t.abortSignal,leaseAccessConditions:t.conditions,metadata:e,modifiedAccessConditions:Object(o.a)(Object(o.a)({},t.conditions),{ifTags:null===(n=t.conditions)||void 0===n?void 0:n.tagConditions}),cpkInfo:t.customerProvidedKey,encryptionScope:t.encryptionScope,spanOptions:a})];case 2:return[2,d.sent()];case 3:throw c=d.sent(),i.setStatus({code:r.CanonicalCode.UNKNOWN,message:c.message}),c;case 4:return i.end(),[7];case 5:return[2]}}))}))},n.prototype.setTags=function(e,t){var n;return void 0===t&&(t={}),Object(o.f)(this,void 0,void 0,(function(){var s,i,a,c;return Object(o.h)(this,(function(d){switch(d.label){case 0:s=Object(x.a)("BlobClient-setTags",t.tracingOptions),i=s.span,a=s.spanOptions,d.label=1;case 1:return d.trys.push([1,3,4,5]),[4,this.blobContext.setTags({abortSignal:t.abortSignal,modifiedAccessConditions:Object(o.a)(Object(o.a)({},t.conditions),{ifTags:null===(n=t.conditions)||void 0===n?void 0:n.tagConditions}),spanOptions:a,tags:Object(U.o)(e)})];case 2:return[2,d.sent()];case 3:throw c=d.sent(),i.setStatus({code:r.CanonicalCode.UNKNOWN,message:c.message}),c;case 4:return i.end(),[7];case 5:return[2]}}))}))},n.prototype.getTags=function(e){var t;return void 0===e&&(e={}),Object(o.f)(this,void 0,void 0,(function(){var n,s,i,a,c;return Object(o.h)(this,(function(d){switch(d.label){case 0:n=Object(x.a)("BlobClient-getTags",e.tracingOptions),s=n.span,i=n.spanOptions,d.label=1;case 1:return d.trys.push([1,3,4,5]),[4,this.blobContext.getTags({abortSignal:e.abortSignal,modifiedAccessConditions:Object(o.a)(Object(o.a)({},e.conditions),{ifTags:null===(t=e.conditions)||void 0===t?void 0:t.tagConditions}),spanOptions:i})];case 2:return a=d.sent(),[2,Object(o.a)(Object(o.a)({},a),{_response:a._response,tags:Object(U.r)({blobTagSet:a.blobTagSet})||{}})];case 3:throw c=d.sent(),s.setStatus({code:r.CanonicalCode.UNKNOWN,message:c.message}),c;case 4:return s.end(),[7];case 5:return[2]}}))}))},n.prototype.getBlobLeaseClient=function(e){return new K(this,e)},n.prototype.createSnapshot=function(e){var t;return void 0===e&&(e={}),Object(o.f)(this,void 0,void 0,(function(){var n,s,i,a;return Object(o.h)(this,(function(c){switch(c.label){case 0:n=Object(x.a)("BlobClient-createSnapshot",e.tracingOptions),s=n.span,i=n.spanOptions,e.conditions=e.conditions||{},c.label=1;case 1:return c.trys.push([1,3,4,5]),Object(j.a)(e.customerProvidedKey,this.isHttps),[4,this.blobContext.createSnapshot({abortSignal:e.abortSignal,leaseAccessConditions:e.conditions,metadata:e.metadata,modifiedAccessConditions:Object(o.a)(Object(o.a)({},e.conditions),{ifTags:null===(t=e.conditions)||void 0===t?void 0:t.tagConditions}),cpkInfo:e.customerProvidedKey,encryptionScope:e.encryptionScope,spanOptions:i})];case 2:return[2,c.sent()];case 3:throw a=c.sent(),s.setStatus({code:r.CanonicalCode.UNKNOWN,message:a.message}),a;case 4:return s.end(),[7];case 5:return[2]}}))}))},n.prototype.beginCopyFromURL=function(e,t){return void 0===t&&(t={}),Object(o.f)(this,void 0,void 0,(function(){var n,s,i=this;return Object(o.h)(this,(function(o){switch(o.label){case 0:return n={abortCopyFromURL:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return i.abortCopyFromURL.apply(i,e)},getProperties:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return i.getProperties.apply(i,e)},startCopyFromURL:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return i.startCopyFromURL.apply(i,e)}},[4,(s=new y.a({blobClient:n,copySource:e,intervalInMs:t.intervalInMs,onProgress:t.onProgress,resumeFrom:t.resumeFrom,startCopyFromURLOptions:t})).poll()];case 1:return o.sent(),[2,s]}}))}))},n.prototype.abortCopyFromURL=function(e,t){return void 0===t&&(t={}),Object(o.f)(this,void 0,void 0,(function(){var n,s,i,a;return Object(o.h)(this,(function(o){switch(o.label){case 0:n=Object(x.a)("BlobClient-abortCopyFromURL",t.tracingOptions),s=n.span,i=n.spanOptions,o.label=1;case 1:return o.trys.push([1,3,4,5]),[4,this.blobContext.abortCopyFromURL(e,{abortSignal:t.abortSignal,leaseAccessConditions:t.conditions,spanOptions:i})];case 2:return[2,o.sent()];case 3:throw a=o.sent(),s.setStatus({code:r.CanonicalCode.UNKNOWN,message:a.message}),a;case 4:return s.end(),[7];case 5:return[2]}}))}))},n.prototype.syncCopyFromURL=function(e,t){var n;return void 0===t&&(t={}),Object(o.f)(this,void 0,void 0,(function(){var s,i,a,c;return Object(o.h)(this,(function(d){switch(d.label){case 0:s=Object(x.a)("BlobClient-syncCopyFromURL",t.tracingOptions),i=s.span,a=s.spanOptions,t.conditions=t.conditions||{},t.sourceConditions=t.sourceConditions||{},d.label=1;case 1:return d.trys.push([1,3,4,5]),[4,this.blobContext.copyFromURL(e,{abortSignal:t.abortSignal,metadata:t.metadata,leaseAccessConditions:t.conditions,modifiedAccessConditions:Object(o.a)(Object(o.a)({},t.conditions),{ifTags:null===(n=t.conditions)||void 0===n?void 0:n.tagConditions}),sourceModifiedAccessConditions:{sourceIfMatch:t.sourceConditions.ifMatch,sourceIfModifiedSince:t.sourceConditions.ifModifiedSince,sourceIfNoneMatch:t.sourceConditions.ifNoneMatch,sourceIfUnmodifiedSince:t.sourceConditions.ifUnmodifiedSince},sourceContentMD5:t.sourceContentMD5,blobTagsString:Object(U.p)(t.tags),spanOptions:a})];case 2:return[2,d.sent()];case 3:throw c=d.sent(),i.setStatus({code:r.CanonicalCode.UNKNOWN,message:c.message}),c;case 4:return i.end(),[7];case 5:return[2]}}))}))},n.prototype.setAccessTier=function(e,t){var n;return void 0===t&&(t={}),Object(o.f)(this,void 0,void 0,(function(){var s,i,a,c;return Object(o.h)(this,(function(d){switch(d.label){case 0:s=Object(x.a)("BlobClient-setAccessTier",t.tracingOptions),i=s.span,a=s.spanOptions,d.label=1;case 1:return d.trys.push([1,3,4,5]),[4,this.blobContext.setTier(Object(j.b)(e),{abortSignal:t.abortSignal,leaseAccessConditions:t.conditions,modifiedAccessConditions:Object(o.a)(Object(o.a)({},t.conditions),{ifTags:null===(n=t.conditions)||void 0===n?void 0:n.tagConditions}),rehydratePriority:t.rehydratePriority,spanOptions:a})];case 2:return[2,d.sent()];case 3:throw c=d.sent(),i.setStatus({code:r.CanonicalCode.UNKNOWN,message:c.message}),c;case 4:return i.end(),[7];case 5:return[2]}}))}))},n.prototype.downloadToBuffer=function(t,n,s,i){return void 0===i&&(i={}),Object(o.f)(this,void 0,void 0,(function(){var a,c,d,l,u,b,p,O,h,g,f,v,j,C=this;return Object(o.h)(this,(function(m){switch(m.label){case 0:c=0,d=0,l=i,t instanceof e?(a=t,c=n||0,d="number"==typeof s?s:0):(c="number"==typeof t?t:0,d="number"==typeof n?n:0,l=s||{}),u=Object(x.a)("BlobClient-downloadToBuffer",l.tracingOptions),b=u.span,p=u.spanOptions,m.label=1;case 1:if(m.trys.push([1,5,6,7]),l.blockSize||(l.blockSize=0),l.blockSize<0)throw new RangeError("blockSize option must be >= 0");if(0===l.blockSize&&(l.blockSize=B.e),c<0)throw new RangeError("offset option must be >= 0");if(d&&d<=0)throw new RangeError("count option must be > 0");return l.conditions||(l.conditions={}),d?[3,3]:[4,this.getProperties(Object(o.a)(Object(o.a)({},l),{tracingOptions:Object(o.a)(Object(o.a)({},l.tracingOptions),{spanOptions:p})}))];case 2:if(O=m.sent(),(d=O.contentLength-c)<0)throw new RangeError("offset "+c+" shouldn't be larger than blob size "+O.contentLength);m.label=3;case 3:if(!a)try{a=e.alloc(d)}catch(y){throw new Error("Unable to allocate the buffer of size: "+d+'(in bytes). Please try passing your own buffer to the "downloadToBuffer" method or try using other methods like "download" or "downloadToFile".\t '+y.message)}if(a.length<d)throw new RangeError("The buffer's size should be equal to or larger than the request count of bytes: "+d);for(h=0,g=new N.a(l.concurrency),f=function(e){g.addOperation((function(){return Object(o.f)(C,void 0,void 0,(function(){var t,n,s;return Object(o.h)(this,(function(i){switch(i.label){case 0:return t=c+d,e+l.blockSize<t&&(t=e+l.blockSize),[4,this.download(e,t-e,{abortSignal:l.abortSignal,conditions:l.conditions,maxRetryRequests:l.maxRetryRequestsPerBlock,customerProvidedKey:l.customerProvidedKey,tracingOptions:Object(o.a)(Object(o.a)({},l.tracingOptions),{spanOptions:p})})];case 1:return n=i.sent(),s=n.readableStreamBody,[4,Object(A.e)(s,a,e-c,t-c)];case 2:return i.sent(),h+=t-e,l.onProgress&&l.onProgress({loadedBytes:h}),[2]}}))}))}))},v=c;v<c+d;v+=l.blockSize)f(v);return[4,g.do()];case 4:return m.sent(),[2,a];case 5:throw j=m.sent(),b.setStatus({code:r.CanonicalCode.UNKNOWN,message:j.message}),j;case 6:return b.end(),[7];case 7:return[2]}}))}))},n.prototype.downloadToFile=function(e,t,n,s){return void 0===t&&(t=0),void 0===s&&(s={}),Object(o.f)(this,void 0,void 0,(function(){var i,a,c,d,l;return Object(o.h)(this,(function(u){switch(u.label){case 0:i=Object(x.a)("BlobClient-downloadToFile",s.tracingOptions),a=i.span,c=i.spanOptions,u.label=1;case 1:return u.trys.push([1,5,6,7]),[4,this.download(t,n,Object(o.a)(Object(o.a)({},s),{tracingOptions:Object(o.a)(Object(o.a)({},s.tracingOptions),{spanOptions:c})}))];case 2:return(d=u.sent()).readableStreamBody?[4,Object(A.d)(d.readableStreamBody,e)]:[3,4];case 3:u.sent(),u.label=4;case 4:return d.blobDownloadStream=void 0,[2,d];case 5:throw l=u.sent(),a.setStatus({code:r.CanonicalCode.UNKNOWN,message:l.message}),l;case 6:return a.end(),[7];case 7:return[2]}}))}))},n.prototype.getBlobAndContainerNamesFromUrl=function(){var e,t;try{var n=c.a.parse(this.url);if("blob"===n.getHost().split(".")[1])e=(o=n.getPath().match("/([^/]*)(/(.*))?"))[1],t=o[3];else if(Object(U.k)(n)){e=(o=n.getPath().match("/([^/]*)/([^/]*)(/(.*))?"))[2],t=o[4]}else{var o;e=(o=n.getPath().match("/([^/]*)(/(.*))?"))[1],t=o[3]}if(e=decodeURIComponent(e),!(t=(t=decodeURIComponent(t)).replace(/\\/g,"/")))throw new Error("Provided blobName is invalid.");if(!e)throw new Error("Provided containerName is invalid.");return{blobName:t,containerName:e}}catch(s){throw new Error("Unable to extract blobName and containerName with provided information.")}},n.prototype.startCopyFromURL=function(e,t){var n;return void 0===t&&(t={}),Object(o.f)(this,void 0,void 0,(function(){var s,i,a,c;return Object(o.h)(this,(function(d){switch(d.label){case 0:s=Object(x.a)("BlobClient-startCopyFromURL",t.tracingOptions),i=s.span,a=s.spanOptions,t.conditions=t.conditions||{},t.sourceConditions=t.sourceConditions||{},d.label=1;case 1:return d.trys.push([1,3,4,5]),[4,this.blobContext.startCopyFromURL(e,{abortSignal:t.abortSignal,leaseAccessConditions:t.conditions,metadata:t.metadata,modifiedAccessConditions:Object(o.a)(Object(o.a)({},t.conditions),{ifTags:null===(n=t.conditions)||void 0===n?void 0:n.tagConditions}),sourceModifiedAccessConditions:{sourceIfMatch:t.sourceConditions.ifMatch,sourceIfModifiedSince:t.sourceConditions.ifModifiedSince,sourceIfNoneMatch:t.sourceConditions.ifNoneMatch,sourceIfUnmodifiedSince:t.sourceConditions.ifUnmodifiedSince,sourceIfTags:t.sourceConditions.tagConditions},rehydratePriority:t.rehydratePriority,tier:Object(j.b)(t.tier),blobTagsString:Object(U.p)(t.tags),sealBlob:t.sealBlob,spanOptions:a})];case 2:return[2,d.sent()];case 3:throw c=d.sent(),i.setStatus({code:r.CanonicalCode.UNKNOWN,message:c.message}),c;case 4:return i.end(),[7];case 5:return[2]}}))}))},n}(w.a),I=function(e){function t(t,n,o,c){var r,d,l=this;if(c=c||{},n instanceof m.a)d=t,r=n;else if(s.d&&n instanceof b.a||n instanceof u.a||Object(i.a)(n))d=t,c=o,r=Object(m.b)(n,c);else if(n||"string"==typeof n){if(!n||"string"!=typeof n||!o||"string"!=typeof o)throw new Error("Expecting non-empty strings for containerName and blobName parameters");var p=n,h=o,g=Object(U.d)(t);if("AccountConnString"===g.kind){if(!s.d)throw new Error("Account connection string is only supported in Node.js environment");var f=new b.a(g.accountName,g.accountKey);d=Object(U.a)(Object(U.a)(g.url,encodeURIComponent(p)),encodeURIComponent(h)),c.proxyOptions=Object(a.a)(g.proxyUri),r=Object(m.b)(f,c)}else{if("SASConnString"!==g.kind)throw new Error("Connection string must be either an Account connection string or a SAS connection string");d=Object(U.a)(Object(U.a)(g.url,encodeURIComponent(p)),encodeURIComponent(h))+"?"+g.accountSas,r=Object(m.b)(new u.a,c)}}else d=t,r=Object(m.b)(new u.a,c);return(l=e.call(this,d,r)||this).appendBlobContext=new O.a(l.storageClientContext),l}return Object(o.g)(t,e),t.prototype.withSnapshot=function(e){return new t(Object(U.n)(this.url,B.t.Parameters.SNAPSHOT,0===e.length?void 0:e),this.pipeline)},t.prototype.create=function(e){var t;return void 0===e&&(e={}),Object(o.f)(this,void 0,void 0,(function(){var n,s,i,a;return Object(o.h)(this,(function(c){switch(c.label){case 0:n=Object(x.a)("AppendBlobClient-create",e.tracingOptions),s=n.span,i=n.spanOptions,e.conditions=e.conditions||{},c.label=1;case 1:return c.trys.push([1,3,4,5]),Object(j.a)(e.customerProvidedKey,this.isHttps),[4,this.appendBlobContext.create(0,{abortSignal:e.abortSignal,blobHTTPHeaders:e.blobHTTPHeaders,leaseAccessConditions:e.conditions,metadata:e.metadata,modifiedAccessConditions:Object(o.a)(Object(o.a)({},e.conditions),{ifTags:null===(t=e.conditions)||void 0===t?void 0:t.tagConditions}),cpkInfo:e.customerProvidedKey,encryptionScope:e.encryptionScope,blobTagsString:Object(U.p)(e.tags),spanOptions:i})];case 2:return[2,c.sent()];case 3:throw a=c.sent(),s.setStatus({code:r.CanonicalCode.UNKNOWN,message:a.message}),a;case 4:return s.end(),[7];case 5:return[2]}}))}))},t.prototype.createIfNotExists=function(e){var t,n;return void 0===e&&(e={}),Object(o.f)(this,void 0,void 0,(function(){var s,i,a,c,d,l;return Object(o.h)(this,(function(u){switch(u.label){case 0:s=Object(x.a)("AppendBlobClient-createIfNotExists",e.tracingOptions),i=s.span,a=s.spanOptions,c={ifNoneMatch:B.i},u.label=1;case 1:return u.trys.push([1,3,4,5]),[4,this.create(Object(o.a)(Object(o.a)({},e),{conditions:c,tracingOptions:Object(o.a)(Object(o.a)({},e.tracingOptions),{spanOptions:a})}))];case 2:return d=u.sent(),[2,Object(o.a)(Object(o.a)({succeeded:!0},d),{_response:d._response})];case 3:if(l=u.sent(),"BlobAlreadyExists"===(null===(t=l.details)||void 0===t?void 0:t.errorCode))return i.setStatus({code:r.CanonicalCode.ALREADY_EXISTS,message:"Expected exception when creating a blob only if it does not already exist."}),[2,Object(o.a)(Object(o.a)({succeeded:!1},null===(n=l.response)||void 0===n?void 0:n.parsedHeaders),{_response:l.response})];throw i.setStatus({code:r.CanonicalCode.UNKNOWN,message:l.message}),l;case 4:return i.end(),[7];case 5:return[2]}}))}))},t.prototype.seal=function(e){var t;return void 0===e&&(e={}),Object(o.f)(this,void 0,void 0,(function(){var n,s,i,a;return Object(o.h)(this,(function(c){switch(c.label){case 0:n=Object(x.a)("AppendBlobClient-seal",e.tracingOptions),s=n.span,i=n.spanOptions,e.conditions=e.conditions||{},c.label=1;case 1:return c.trys.push([1,3,4,5]),[4,this.appendBlobContext.seal({abortSignal:e.abortSignal,appendPositionAccessConditions:e.conditions,leaseAccessConditions:e.conditions,modifiedAccessConditions:Object(o.a)(Object(o.a)({},e.conditions),{ifTags:null===(t=e.conditions)||void 0===t?void 0:t.tagConditions}),spanOptions:i})];case 2:return[2,c.sent()];case 3:throw a=c.sent(),s.setStatus({code:r.CanonicalCode.UNKNOWN,message:a.message}),a;case 4:return s.end(),[7];case 5:return[2]}}))}))},t.prototype.appendBlock=function(e,t,n){var s;return void 0===n&&(n={}),Object(o.f)(this,void 0,void 0,(function(){var i,a,c,d;return Object(o.h)(this,(function(l){switch(l.label){case 0:i=Object(x.a)("AppendBlobClient-appendBlock",n.tracingOptions),a=i.span,c=i.spanOptions,n.conditions=n.conditions||{},l.label=1;case 1:return l.trys.push([1,3,4,5]),Object(j.a)(n.customerProvidedKey,this.isHttps),[4,this.appendBlobContext.appendBlock(e,t,{abortSignal:n.abortSignal,appendPositionAccessConditions:n.conditions,leaseAccessConditions:n.conditions,modifiedAccessConditions:Object(o.a)(Object(o.a)({},n.conditions),{ifTags:null===(s=n.conditions)||void 0===s?void 0:s.tagConditions}),onUploadProgress:n.onProgress,transactionalContentMD5:n.transactionalContentMD5,transactionalContentCrc64:n.transactionalContentCrc64,cpkInfo:n.customerProvidedKey,encryptionScope:n.encryptionScope,spanOptions:c})];case 2:return[2,l.sent()];case 3:throw d=l.sent(),a.setStatus({code:r.CanonicalCode.UNKNOWN,message:d.message}),d;case 4:return a.end(),[7];case 5:return[2]}}))}))},t.prototype.appendBlockFromURL=function(e,t,n,s){var i;return void 0===s&&(s={}),Object(o.f)(this,void 0,void 0,(function(){var a,c,d,l;return Object(o.h)(this,(function(u){switch(u.label){case 0:a=Object(x.a)("AppendBlobClient-appendBlockFromURL",s.tracingOptions),c=a.span,d=a.spanOptions,s.conditions=s.conditions||{},s.sourceConditions=s.sourceConditions||{},u.label=1;case 1:return u.trys.push([1,3,4,5]),Object(j.a)(s.customerProvidedKey,this.isHttps),[4,this.appendBlobContext.appendBlockFromUrl(e,0,{abortSignal:s.abortSignal,sourceRange:Object(S.a)({offset:t,count:n}),sourceContentMD5:s.sourceContentMD5,sourceContentCrc64:s.sourceContentCrc64,leaseAccessConditions:s.conditions,appendPositionAccessConditions:s.conditions,modifiedAccessConditions:Object(o.a)(Object(o.a)({},s.conditions),{ifTags:null===(i=s.conditions)||void 0===i?void 0:i.tagConditions}),sourceModifiedAccessConditions:{sourceIfMatch:s.sourceConditions.ifMatch,sourceIfModifiedSince:s.sourceConditions.ifModifiedSince,sourceIfNoneMatch:s.sourceConditions.ifNoneMatch,sourceIfUnmodifiedSince:s.sourceConditions.ifUnmodifiedSince},cpkInfo:s.customerProvidedKey,encryptionScope:s.encryptionScope,spanOptions:d})];case 2:return[2,u.sent()];case 3:throw l=u.sent(),c.setStatus({code:r.CanonicalCode.UNKNOWN,message:l.message}),l;case 4:return c.end(),[7];case 5:return[2]}}))}))},t}(k),T=function(t){function n(e,n,o,c){var r,d,l=this;if(c=c||{},n instanceof m.a)d=e,r=n;else if(s.d&&n instanceof b.a||n instanceof u.a||Object(i.a)(n))d=e,c=o,r=Object(m.b)(n,c);else if(n||"string"==typeof n){if(!n||"string"!=typeof n||!o||"string"!=typeof o)throw new Error("Expecting non-empty strings for containerName and blobName parameters");var O=n,g=o,f=Object(U.d)(e);if("AccountConnString"===f.kind){if(!s.d)throw new Error("Account connection string is only supported in Node.js environment");var v=new b.a(f.accountName,f.accountKey);d=Object(U.a)(Object(U.a)(f.url,encodeURIComponent(O)),encodeURIComponent(g)),c.proxyOptions=Object(a.a)(f.proxyUri),r=Object(m.b)(v,c)}else{if("SASConnString"!==f.kind)throw new Error("Connection string must be either an Account connection string or a SAS connection string");d=Object(U.a)(Object(U.a)(f.url,encodeURIComponent(O)),encodeURIComponent(g))+"?"+f.accountSas,r=Object(m.b)(new u.a,c)}}else d=e,r=Object(m.b)(new u.a,c);return(l=t.call(this,d,r)||this).blockBlobContext=new h.a(l.storageClientContext),l._blobContext=new p.a(l.storageClientContext),l}return Object(o.g)(n,t),n.prototype.withSnapshot=function(e){return new n(Object(U.n)(this.url,B.t.Parameters.SNAPSHOT,0===e.length?void 0:e),this.pipeline)},n.prototype.query=function(e,t){var n;return void 0===t&&(t={}),Object(o.f)(this,void 0,void 0,(function(){var i,a,c,d,u;return Object(o.h)(this,(function(b){switch(b.label){case 0:Object(j.a)(t.customerProvidedKey,this.isHttps),i=Object(x.a)("BlockBlobClient-query",t.tracingOptions),a=i.span,c=i.spanOptions,b.label=1;case 1:if(b.trys.push([1,3,4,5]),!s.d)throw new Error("This operation currently is only supported in Node.js.");return[4,this._blobContext.query({abortSignal:t.abortSignal,queryRequest:{expression:e,inputSerialization:Object(U.q)(t.inputTextConfiguration),outputSerialization:Object(U.q)(t.outputTextConfiguration)},leaseAccessConditions:t.conditions,modifiedAccessConditions:Object(o.a)(Object(o.a)({},t.conditions),{ifTags:null===(n=t.conditions)||void 0===n?void 0:n.tagConditions}),spanOptions:c})];case 2:return d=b.sent(),[2,new l.a(d,{abortSignal:t.abortSignal,onProgress:t.onProgress,onError:t.onError})];case 3:throw u=b.sent(),a.setStatus({code:r.CanonicalCode.UNKNOWN,message:u.message}),u;case 4:return a.end(),[7];case 5:return[2]}}))}))},n.prototype.upload=function(e,t,n){var s;return void 0===n&&(n={}),Object(o.f)(this,void 0,void 0,(function(){var i,a,c,d;return Object(o.h)(this,(function(l){switch(l.label){case 0:n.conditions=n.conditions||{},i=Object(x.a)("BlockBlobClient-upload",n.tracingOptions),a=i.span,c=i.spanOptions,l.label=1;case 1:return l.trys.push([1,3,4,5]),Object(j.a)(n.customerProvidedKey,this.isHttps),[4,this.blockBlobContext.upload(e,t,{abortSignal:n.abortSignal,blobHTTPHeaders:n.blobHTTPHeaders,leaseAccessConditions:n.conditions,metadata:n.metadata,modifiedAccessConditions:Object(o.a)(Object(o.a)({},n.conditions),{ifTags:null===(s=n.conditions)||void 0===s?void 0:s.tagConditions}),onUploadProgress:n.onProgress,cpkInfo:n.customerProvidedKey,encryptionScope:n.encryptionScope,tier:Object(j.b)(n.tier),blobTagsString:Object(U.p)(n.tags),spanOptions:c})];case 2:return[2,l.sent()];case 3:throw d=l.sent(),a.setStatus({code:r.CanonicalCode.UNKNOWN,message:d.message}),d;case 4:return a.end(),[7];case 5:return[2]}}))}))},n.prototype.stageBlock=function(e,t,n,s){return void 0===s&&(s={}),Object(o.f)(this,void 0,void 0,(function(){var i,a,c,d;return Object(o.h)(this,(function(o){switch(o.label){case 0:i=Object(x.a)("BlockBlobClient-stageBlock",s.tracingOptions),a=i.span,c=i.spanOptions,o.label=1;case 1:return o.trys.push([1,3,4,5]),Object(j.a)(s.customerProvidedKey,this.isHttps),[4,this.blockBlobContext.stageBlock(e,n,t,{abortSignal:s.abortSignal,leaseAccessConditions:s.conditions,onUploadProgress:s.onProgress,transactionalContentMD5:s.transactionalContentMD5,transactionalContentCrc64:s.transactionalContentCrc64,cpkInfo:s.customerProvidedKey,encryptionScope:s.encryptionScope,spanOptions:c})];case 2:return[2,o.sent()];case 3:throw d=o.sent(),a.setStatus({code:r.CanonicalCode.UNKNOWN,message:d.message}),d;case 4:return a.end(),[7];case 5:return[2]}}))}))},n.prototype.stageBlockFromURL=function(e,t,n,s,i){return void 0===n&&(n=0),void 0===i&&(i={}),Object(o.f)(this,void 0,void 0,(function(){var a,c,d,l;return Object(o.h)(this,(function(o){switch(o.label){case 0:a=Object(x.a)("BlockBlobClient-stageBlockFromURL",i.tracingOptions),c=a.span,d=a.spanOptions,o.label=1;case 1:return o.trys.push([1,3,4,5]),Object(j.a)(i.customerProvidedKey,this.isHttps),[4,this.blockBlobContext.stageBlockFromURL(e,0,t,{abortSignal:i.abortSignal,leaseAccessConditions:i.conditions,sourceContentMD5:i.sourceContentMD5,sourceContentCrc64:i.sourceContentCrc64,sourceRange:0!==n||s?Object(S.a)({offset:n,count:s}):void 0,cpkInfo:i.customerProvidedKey,encryptionScope:i.encryptionScope,spanOptions:d})];case 2:return[2,o.sent()];case 3:throw l=o.sent(),c.setStatus({code:r.CanonicalCode.UNKNOWN,message:l.message}),l;case 4:return c.end(),[7];case 5:return[2]}}))}))},n.prototype.commitBlockList=function(e,t){var n;return void 0===t&&(t={}),Object(o.f)(this,void 0,void 0,(function(){var s,i,a,c;return Object(o.h)(this,(function(d){switch(d.label){case 0:t.conditions=t.conditions||{},s=Object(x.a)("BlockBlobClient-commitBlockList",t.tracingOptions),i=s.span,a=s.spanOptions,d.label=1;case 1:return d.trys.push([1,3,4,5]),Object(j.a)(t.customerProvidedKey,this.isHttps),[4,this.blockBlobContext.commitBlockList({latest:e},{abortSignal:t.abortSignal,blobHTTPHeaders:t.blobHTTPHeaders,leaseAccessConditions:t.conditions,metadata:t.metadata,modifiedAccessConditions:Object(o.a)(Object(o.a)({},t.conditions),{ifTags:null===(n=t.conditions)||void 0===n?void 0:n.tagConditions}),cpkInfo:t.customerProvidedKey,encryptionScope:t.encryptionScope,tier:Object(j.b)(t.tier),blobTagsString:Object(U.p)(t.tags),spanOptions:a})];case 2:return[2,d.sent()];case 3:throw c=d.sent(),i.setStatus({code:r.CanonicalCode.UNKNOWN,message:c.message}),c;case 4:return i.end(),[7];case 5:return[2]}}))}))},n.prototype.getBlockList=function(e,t){var n;return void 0===t&&(t={}),Object(o.f)(this,void 0,void 0,(function(){var s,i,a,c,d;return Object(o.h)(this,(function(l){switch(l.label){case 0:s=Object(x.a)("BlockBlobClient-getBlockList",t.tracingOptions),i=s.span,a=s.spanOptions,l.label=1;case 1:return l.trys.push([1,3,4,5]),[4,this.blockBlobContext.getBlockList(e,{abortSignal:t.abortSignal,leaseAccessConditions:t.conditions,modifiedAccessConditions:Object(o.a)(Object(o.a)({},t.conditions),{ifTags:null===(n=t.conditions)||void 0===n?void 0:n.tagConditions}),spanOptions:a})];case 2:return(c=l.sent()).committedBlocks||(c.committedBlocks=[]),c.uncommittedBlocks||(c.uncommittedBlocks=[]),[2,c];case 3:throw d=l.sent(),i.setStatus({code:r.CanonicalCode.UNKNOWN,message:d.message}),d;case 4:return i.end(),[7];case 5:return[2]}}))}))},n.prototype.uploadData=function(t,n){return void 0===n&&(n={}),Object(o.f)(this,void 0,void 0,(function(){var i,a,c,d,l;return Object(o.h)(this,(function(u){i=Object(x.a)("BlockBlobClient-uploadData",n.tracingOptions),a=i.span,c=i.spanOptions;try{return s.d?(t instanceof e?d=t:t instanceof ArrayBuffer?d=e.from(t):(t=t,d=e.from(t.buffer,t.byteOffset,t.byteLength)),[2,this.uploadSeekableInternal((function(e,t){return d.slice(e,e+t)}),d.byteLength,Object(o.a)(Object(o.a)({},n),{tracingOptions:Object(o.a)(Object(o.a)({},n.tracingOptions),{spanOptions:c})}))]):(l=new Blob([t]),[2,this.uploadSeekableInternal((function(e,t){return l.slice(e,e+t)}),l.size,Object(o.a)(Object(o.a)({},n),{tracingOptions:Object(o.a)(Object(o.a)({},n.tracingOptions),{spanOptions:c})}))])}catch(b){throw a.setStatus({code:r.CanonicalCode.UNKNOWN,message:b.message}),b}finally{a.end()}return[2]}))}))},n.prototype.uploadBrowserData=function(e,t){return void 0===t&&(t={}),Object(o.f)(this,void 0,void 0,(function(){var n,s,i,a,c;return Object(o.h)(this,(function(d){switch(d.label){case 0:n=Object(x.a)("BlockBlobClient-uploadBrowserData",t.tracingOptions),s=n.span,i=n.spanOptions,d.label=1;case 1:return d.trys.push([1,3,4,5]),a=new Blob([e]),[4,this.uploadSeekableInternal((function(e,t){return a.slice(e,e+t)}),a.size,Object(o.a)(Object(o.a)({},t),{tracingOptions:Object(o.a)(Object(o.a)({},t.tracingOptions),{spanOptions:i})}))];case 2:return[2,d.sent()];case 3:throw c=d.sent(),s.setStatus({code:r.CanonicalCode.UNKNOWN,message:c.message}),c;case 4:return s.end(),[7];case 5:return[2]}}))}))},n.prototype.uploadSeekableInternal=function(e,t,n){return void 0===n&&(n={}),Object(o.f)(this,void 0,void 0,(function(){var i,a,c,d,l,u,b,p,O,h,g,f=this;return Object(o.h)(this,(function(v){switch(v.label){case 0:if(n.blockSize||(n.blockSize=0),n.blockSize<0||n.blockSize>B.c)throw new RangeError("blockSize option must be >= 0 and <= "+B.c);if(0===n.maxSingleShotSize||n.maxSingleShotSize||(n.maxSingleShotSize=B.d),n.maxSingleShotSize<0||n.maxSingleShotSize>B.d)throw new RangeError("maxSingleShotSize option must be >= 0 and <= "+B.d);if(0===n.blockSize){if(t>B.c*B.b)throw new RangeError(t+" is too larger to upload to a block blob.");t>n.maxSingleShotSize&&(n.blockSize=Math.ceil(t/B.b),n.blockSize<B.e&&(n.blockSize=B.e))}n.blobHTTPHeaders||(n.blobHTTPHeaders={}),n.conditions||(n.conditions={}),i=Object(x.a)("BlockBlobClient-uploadSeekableInternal",n.tracingOptions),a=i.span,c=i.spanOptions,v.label=1;case 1:return v.trys.push([1,5,6,7]),t<=n.maxSingleShotSize?[4,this.upload(e(0,t),t,Object(o.a)(Object(o.a)({},n),{tracingOptions:Object(o.a)(Object(o.a)({},n.tracingOptions),{spanOptions:c})}))]:[3,3];case 2:return[2,v.sent()];case 3:if((d=Math.floor((t-1)/n.blockSize)+1)>B.b)throw new RangeError("The buffer's size is too big or the BlockSize is too small;the number of blocks must be <= "+B.b);for(l=[],u=Object(s.b)(),b=0,p=new N.a(n.concurrency),O=function(s){p.addOperation((function(){return Object(o.f)(f,void 0,void 0,(function(){var i,a,r,p;return Object(o.h)(this,(function(O){switch(O.label){case 0:return i=Object(U.e)(u,s),a=n.blockSize*s,r=s===d-1?t:a+n.blockSize,p=r-a,l.push(i),[4,this.stageBlock(i,e(a,p),p,{abortSignal:n.abortSignal,conditions:n.conditions,encryptionScope:n.encryptionScope,tracingOptions:Object(o.a)(Object(o.a)({},n.tracingOptions),{spanOptions:c})})];case 1:return O.sent(),b+=p,n.onProgress&&n.onProgress({loadedBytes:b}),[2]}}))}))}))},h=0;h<d;h++)O(h);return[4,p.do()];case 4:return v.sent(),[2,this.commitBlockList(l,Object(o.a)(Object(o.a)({},n),{tracingOptions:Object(o.a)(Object(o.a)({},n.tracingOptions),{spanOptions:c})}))];case 5:throw g=v.sent(),a.setStatus({code:r.CanonicalCode.UNKNOWN,message:g.message}),g;case 6:return a.end(),[7];case 7:return[2]}}))}))},n.prototype.uploadFile=function(e,t){return void 0===t&&(t={}),Object(o.f)(this,void 0,void 0,(function(){var n,s,i,a,c;return Object(o.h)(this,(function(d){switch(d.label){case 0:n=Object(x.a)("BlockBlobClient-uploadFile",t.tracingOptions),s=n.span,i=n.spanOptions,d.label=1;case 1:return d.trys.push([1,4,5,6]),[4,Object(A.c)(e)];case 2:return a=d.sent().size,[4,this.uploadSeekableInternal((function(t,n){return function(){return Object(A.b)(e,{autoClose:!0,end:n?t+n-1:1/0,start:t})}}),a,Object(o.a)(Object(o.a)({},t),{tracingOptions:Object(o.a)(Object(o.a)({},t.tracingOptions),{spanOptions:i})}))];case 3:return[2,d.sent()];case 4:throw c=d.sent(),s.setStatus({code:r.CanonicalCode.UNKNOWN,message:c.message}),c;case 5:return s.end(),[7];case 6:return[2]}}))}))},n.prototype.uploadStream=function(e,t,n,i){return void 0===t&&(t=B.f),void 0===n&&(n=5),void 0===i&&(i={}),Object(o.f)(this,void 0,void 0,(function(){var a,c,d,l,u,b,p,O,h=this;return Object(o.h)(this,(function(g){switch(g.label){case 0:i.blobHTTPHeaders||(i.blobHTTPHeaders={}),i.conditions||(i.conditions={}),a=Object(x.a)("BlockBlobClient-uploadStream",i.tracingOptions),c=a.span,d=a.spanOptions,g.label=1;case 1:return g.trys.push([1,4,5,6]),l=0,u=Object(s.b)(),b=0,p=[],[4,new P.a(e,t,n,(function(e,t){return Object(o.f)(h,void 0,void 0,(function(){var n;return Object(o.h)(this,(function(s){switch(s.label){case 0:return n=Object(U.e)(u,l),p.push(n),l++,[4,this.stageBlock(n,e,t,{conditions:i.conditions,encryptionScope:i.encryptionScope,tracingOptions:Object(o.a)(Object(o.a)({},i.tracingOptions),{spanOptions:d})})];case 1:return s.sent(),b+=t,i.onProgress&&i.onProgress({loadedBytes:b}),[2]}}))}))}),Math.ceil(n/4*3)).do()];case 2:return g.sent(),[4,this.commitBlockList(p,Object(o.a)(Object(o.a)({},i),{tracingOptions:Object(o.a)(Object(o.a)({},i.tracingOptions),{spanOptions:d})}))];case 3:return[2,g.sent()];case 4:throw O=g.sent(),c.setStatus({code:r.CanonicalCode.UNKNOWN,message:O.message}),O;case 5:return c.end(),[7];case 6:return[2]}}))}))},n}(k),R=function(e){function t(t,n,o,c){var r,d,l=this;if(c=c||{},n instanceof m.a)d=t,r=n;else if(s.d&&n instanceof b.a||n instanceof u.a||Object(i.a)(n))d=t,c=o,r=Object(m.b)(n,c);else if(n||"string"==typeof n){if(!n||"string"!=typeof n||!o||"string"!=typeof o)throw new Error("Expecting non-empty strings for containerName and blobName parameters");var p=n,O=o,h=Object(U.d)(t);if("AccountConnString"===h.kind){if(!s.d)throw new Error("Account connection string is only supported in Node.js environment");var f=new b.a(h.accountName,h.accountKey);d=Object(U.a)(Object(U.a)(h.url,encodeURIComponent(p)),encodeURIComponent(O)),c.proxyOptions=Object(a.a)(h.proxyUri),r=Object(m.b)(f,c)}else{if("SASConnString"!==h.kind)throw new Error("Connection string must be either an Account connection string or a SAS connection string");d=Object(U.a)(Object(U.a)(h.url,encodeURIComponent(p)),encodeURIComponent(O))+"?"+h.accountSas,r=Object(m.b)(new u.a,c)}}else d=t,r=Object(m.b)(new u.a,c);return(l=e.call(this,d,r)||this).pageBlobContext=new g.a(l.storageClientContext),l}return Object(o.g)(t,e),t.prototype.withSnapshot=function(e){return new t(Object(U.n)(this.url,B.t.Parameters.SNAPSHOT,0===e.length?void 0:e),this.pipeline)},t.prototype.create=function(e,t){var n;return void 0===t&&(t={}),Object(o.f)(this,void 0,void 0,(function(){var s,i,a,c;return Object(o.h)(this,(function(d){switch(d.label){case 0:t.conditions=t.conditions||{},s=Object(x.a)("PageBlobClient-create",t.tracingOptions),i=s.span,a=s.spanOptions,d.label=1;case 1:return d.trys.push([1,3,4,5]),Object(j.a)(t.customerProvidedKey,this.isHttps),[4,this.pageBlobContext.create(0,e,{abortSignal:t.abortSignal,blobHTTPHeaders:t.blobHTTPHeaders,blobSequenceNumber:t.blobSequenceNumber,leaseAccessConditions:t.conditions,metadata:t.metadata,modifiedAccessConditions:Object(o.a)(Object(o.a)({},t.conditions),{ifTags:null===(n=t.conditions)||void 0===n?void 0:n.tagConditions}),cpkInfo:t.customerProvidedKey,encryptionScope:t.encryptionScope,tier:Object(j.b)(t.tier),blobTagsString:Object(U.p)(t.tags),spanOptions:a})];case 2:return[2,d.sent()];case 3:throw c=d.sent(),i.setStatus({code:r.CanonicalCode.UNKNOWN,message:c.message}),c;case 4:return i.end(),[7];case 5:return[2]}}))}))},t.prototype.createIfNotExists=function(e,t){var n,s;return void 0===t&&(t={}),Object(o.f)(this,void 0,void 0,(function(){var i,a,c,d,l,u;return Object(o.h)(this,(function(b){switch(b.label){case 0:i=Object(x.a)("PageBlobClient-createIfNotExists",t.tracingOptions),a=i.span,c=i.spanOptions,b.label=1;case 1:return b.trys.push([1,3,4,5]),d={ifNoneMatch:B.i},[4,this.create(e,Object(o.a)(Object(o.a)({},t),{conditions:d,tracingOptions:Object(o.a)(Object(o.a)({},t.tracingOptions),{spanOptions:c})}))];case 2:return l=b.sent(),[2,Object(o.a)(Object(o.a)({succeeded:!0},l),{_response:l._response})];case 3:if(u=b.sent(),"BlobAlreadyExists"===(null===(n=u.details)||void 0===n?void 0:n.errorCode))return a.setStatus({code:r.CanonicalCode.ALREADY_EXISTS,message:"Expected exception when creating a blob only if it does not already exist."}),[2,Object(o.a)(Object(o.a)({succeeded:!1},null===(s=u.response)||void 0===s?void 0:s.parsedHeaders),{_response:u.response})];throw a.setStatus({code:r.CanonicalCode.UNKNOWN,message:u.message}),u;case 4:return a.end(),[7];case 5:return[2]}}))}))},t.prototype.uploadPages=function(e,t,n,s){var i;return void 0===s&&(s={}),Object(o.f)(this,void 0,void 0,(function(){var a,c,d,l;return Object(o.h)(this,(function(u){switch(u.label){case 0:s.conditions=s.conditions||{},a=Object(x.a)("PageBlobClient-uploadPages",s.tracingOptions),c=a.span,d=a.spanOptions,u.label=1;case 1:return u.trys.push([1,3,4,5]),Object(j.a)(s.customerProvidedKey,this.isHttps),[4,this.pageBlobContext.uploadPages(e,n,{abortSignal:s.abortSignal,leaseAccessConditions:s.conditions,modifiedAccessConditions:Object(o.a)(Object(o.a)({},s.conditions),{ifTags:null===(i=s.conditions)||void 0===i?void 0:i.tagConditions}),onUploadProgress:s.onProgress,range:Object(S.a)({offset:t,count:n}),sequenceNumberAccessConditions:s.conditions,transactionalContentMD5:s.transactionalContentMD5,transactionalContentCrc64:s.transactionalContentCrc64,cpkInfo:s.customerProvidedKey,encryptionScope:s.encryptionScope,spanOptions:d})];case 2:return[2,u.sent()];case 3:throw l=u.sent(),c.setStatus({code:r.CanonicalCode.UNKNOWN,message:l.message}),l;case 4:return c.end(),[7];case 5:return[2]}}))}))},t.prototype.uploadPagesFromURL=function(e,t,n,s,i){var a;return void 0===i&&(i={}),Object(o.f)(this,void 0,void 0,(function(){var c,d,l,u;return Object(o.h)(this,(function(b){switch(b.label){case 0:i.conditions=i.conditions||{},i.sourceConditions=i.sourceConditions||{},c=Object(x.a)("PageBlobClient-uploadPagesFromURL",i.tracingOptions),d=c.span,l=c.spanOptions,b.label=1;case 1:return b.trys.push([1,3,4,5]),Object(j.a)(i.customerProvidedKey,this.isHttps),[4,this.pageBlobContext.uploadPagesFromURL(e,Object(S.a)({offset:t,count:s}),0,Object(S.a)({offset:n,count:s}),{abortSignal:i.abortSignal,sourceContentMD5:i.sourceContentMD5,sourceContentCrc64:i.sourceContentCrc64,leaseAccessConditions:i.conditions,sequenceNumberAccessConditions:i.conditions,modifiedAccessConditions:Object(o.a)(Object(o.a)({},i.conditions),{ifTags:null===(a=i.conditions)||void 0===a?void 0:a.tagConditions}),sourceModifiedAccessConditions:{sourceIfMatch:i.sourceConditions.ifMatch,sourceIfModifiedSince:i.sourceConditions.ifModifiedSince,sourceIfNoneMatch:i.sourceConditions.ifNoneMatch,sourceIfUnmodifiedSince:i.sourceConditions.ifUnmodifiedSince},cpkInfo:i.customerProvidedKey,encryptionScope:i.encryptionScope,spanOptions:l})];case 2:return[2,b.sent()];case 3:throw u=b.sent(),d.setStatus({code:r.CanonicalCode.UNKNOWN,message:u.message}),u;case 4:return d.end(),[7];case 5:return[2]}}))}))},t.prototype.clearPages=function(e,t,n){var s;return void 0===e&&(e=0),void 0===n&&(n={}),Object(o.f)(this,void 0,void 0,(function(){var i,a,c,d;return Object(o.h)(this,(function(l){switch(l.label){case 0:n.conditions=n.conditions||{},i=Object(x.a)("PageBlobClient-clearPages",n.tracingOptions),a=i.span,c=i.spanOptions,l.label=1;case 1:return l.trys.push([1,3,4,5]),[4,this.pageBlobContext.clearPages(0,{abortSignal:n.abortSignal,leaseAccessConditions:n.conditions,modifiedAccessConditions:Object(o.a)(Object(o.a)({},n.conditions),{ifTags:null===(s=n.conditions)||void 0===s?void 0:s.tagConditions}),range:Object(S.a)({offset:e,count:t}),sequenceNumberAccessConditions:n.conditions,cpkInfo:n.customerProvidedKey,encryptionScope:n.encryptionScope,spanOptions:c})];case 2:return[2,l.sent()];case 3:throw d=l.sent(),a.setStatus({code:r.CanonicalCode.UNKNOWN,message:d.message}),d;case 4:return a.end(),[7];case 5:return[2]}}))}))},t.prototype.getPageRanges=function(e,t,n){var s;return void 0===e&&(e=0),void 0===n&&(n={}),Object(o.f)(this,void 0,void 0,(function(){var i,a,c,d;return Object(o.h)(this,(function(l){switch(l.label){case 0:n.conditions=n.conditions||{},i=Object(x.a)("PageBlobClient-getPageRanges",n.tracingOptions),a=i.span,c=i.spanOptions,l.label=1;case 1:return l.trys.push([1,3,4,5]),[4,this.pageBlobContext.getPageRanges({abortSignal:n.abortSignal,leaseAccessConditions:n.conditions,modifiedAccessConditions:Object(o.a)(Object(o.a)({},n.conditions),{ifTags:null===(s=n.conditions)||void 0===s?void 0:s.tagConditions}),range:Object(S.a)({offset:e,count:t}),spanOptions:c}).then(C.a)];case 2:return[2,l.sent()];case 3:throw d=l.sent(),a.setStatus({code:r.CanonicalCode.UNKNOWN,message:d.message}),d;case 4:return a.end(),[7];case 5:return[2]}}))}))},t.prototype.getPageRangesDiff=function(e,t,n,s){var i;return void 0===s&&(s={}),Object(o.f)(this,void 0,void 0,(function(){var a,c,d,l;return Object(o.h)(this,(function(u){switch(u.label){case 0:s.conditions=s.conditions||{},a=Object(x.a)("PageBlobClient-getPageRangesDiff",s.tracingOptions),c=a.span,d=a.spanOptions,u.label=1;case 1:return u.trys.push([1,3,4,5]),[4,this.pageBlobContext.getPageRangesDiff({abortSignal:s.abortSignal,leaseAccessConditions:s.conditions,modifiedAccessConditions:Object(o.a)(Object(o.a)({},s.conditions),{ifTags:null===(i=s.conditions)||void 0===i?void 0:i.tagConditions}),prevsnapshot:n,range:Object(S.a)({offset:e,count:t}),spanOptions:d}).then(C.a)];case 2:return[2,u.sent()];case 3:throw l=u.sent(),c.setStatus({code:r.CanonicalCode.UNKNOWN,message:l.message}),l;case 4:return c.end(),[7];case 5:return[2]}}))}))},t.prototype.getPageRangesDiffForManagedDisks=function(e,t,n,s){var i;return void 0===s&&(s={}),Object(o.f)(this,void 0,void 0,(function(){var a,c,d,l;return Object(o.h)(this,(function(u){switch(u.label){case 0:s.conditions=s.conditions||{},a=Object(x.a)("PageBlobClient-GetPageRangesDiffForManagedDisks",s.tracingOptions),c=a.span,d=a.spanOptions,u.label=1;case 1:return u.trys.push([1,3,4,5]),[4,this.pageBlobContext.getPageRangesDiff({abortSignal:s.abortSignal,leaseAccessConditions:s.conditions,modifiedAccessConditions:Object(o.a)(Object(o.a)({},s.conditions),{ifTags:null===(i=s.conditions)||void 0===i?void 0:i.tagConditions}),prevSnapshotUrl:n,range:Object(S.a)({offset:e,count:t}),spanOptions:d}).then(C.a)];case 2:return[2,u.sent()];case 3:throw l=u.sent(),c.setStatus({code:r.CanonicalCode.UNKNOWN,message:l.message}),l;case 4:return c.end(),[7];case 5:return[2]}}))}))},t.prototype.resize=function(e,t){var n;return void 0===t&&(t={}),Object(o.f)(this,void 0,void 0,(function(){var s,i,a,c;return Object(o.h)(this,(function(d){switch(d.label){case 0:t.conditions=t.conditions||{},s=Object(x.a)("PageBlobClient-resize",t.tracingOptions),i=s.span,a=s.spanOptions,d.label=1;case 1:return d.trys.push([1,3,4,5]),[4,this.pageBlobContext.resize(e,{abortSignal:t.abortSignal,leaseAccessConditions:t.conditions,modifiedAccessConditions:Object(o.a)(Object(o.a)({},t.conditions),{ifTags:null===(n=t.conditions)||void 0===n?void 0:n.tagConditions}),encryptionScope:t.encryptionScope,spanOptions:a})];case 2:return[2,d.sent()];case 3:throw c=d.sent(),i.setStatus({code:r.CanonicalCode.UNKNOWN,message:c.message}),c;case 4:return i.end(),[7];case 5:return[2]}}))}))},t.prototype.updateSequenceNumber=function(e,t,n){var s;return void 0===n&&(n={}),Object(o.f)(this,void 0,void 0,(function(){var i,a,c,d;return Object(o.h)(this,(function(l){switch(l.label){case 0:n.conditions=n.conditions||{},i=Object(x.a)("PageBlobClient-updateSequenceNumber",n.tracingOptions),a=i.span,c=i.spanOptions,l.label=1;case 1:return l.trys.push([1,3,4,5]),[4,this.pageBlobContext.updateSequenceNumber(e,{abortSignal:n.abortSignal,blobSequenceNumber:t,leaseAccessConditions:n.conditions,modifiedAccessConditions:Object(o.a)(Object(o.a)({},n.conditions),{ifTags:null===(s=n.conditions)||void 0===s?void 0:s.tagConditions}),spanOptions:c})];case 2:return[2,l.sent()];case 3:throw d=l.sent(),a.setStatus({code:r.CanonicalCode.UNKNOWN,message:d.message}),d;case 4:return a.end(),[7];case 5:return[2]}}))}))},t.prototype.startCopyIncremental=function(e,t){var n;return void 0===t&&(t={}),Object(o.f)(this,void 0,void 0,(function(){var s,i,a,c;return Object(o.h)(this,(function(d){switch(d.label){case 0:s=Object(x.a)("PageBlobClient-startCopyIncremental",t.tracingOptions),i=s.span,a=s.spanOptions,d.label=1;case 1:return d.trys.push([1,3,4,5]),[4,this.pageBlobContext.copyIncremental(e,{abortSignal:t.abortSignal,modifiedAccessConditions:Object(o.a)(Object(o.a)({},t.conditions),{ifTags:null===(n=t.conditions)||void 0===n?void 0:n.tagConditions}),spanOptions:a})];case 2:return[2,d.sent()];case 3:throw c=d.sent(),i.setStatus({code:r.CanonicalCode.UNKNOWN,message:c.message}),c;case 4:return i.end(),[7];case 5:return[2]}}))}))},t}(k),K=function(){function e(e,t){var n=new v.a(e.url,e.pipeline.toServiceClientOptions());this._url=e.url,e instanceof M?(this._isContainer=!0,this._containerOrBlobOperation=new f.a(n)):(this._isContainer=!1,this._containerOrBlobOperation=new p.a(n)),t||(t=Object(s.b)()),this._leaseId=t}return Object.defineProperty(e.prototype,"leaseId",{get:function(){return this._leaseId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"url",{get:function(){return this._url},enumerable:!1,configurable:!0}),e.prototype.acquireLease=function(e,t){var n,s,i,a,c,d;return void 0===t&&(t={}),Object(o.f)(this,void 0,void 0,(function(){var l,u,b,p;return Object(o.h)(this,(function(O){switch(O.label){case 0:if(l=Object(x.a)("BlobLeaseClient-acquireLease",t.tracingOptions),u=l.span,b=l.spanOptions,this._isContainer&&((null===(n=t.conditions)||void 0===n?void 0:n.ifMatch)&&(null===(s=t.conditions)||void 0===s?void 0:s.ifMatch)!==B.j||(null===(i=t.conditions)||void 0===i?void 0:i.ifNoneMatch)&&(null===(a=t.conditions)||void 0===a?void 0:a.ifNoneMatch)!==B.j||(null===(c=t.conditions)||void 0===c?void 0:c.tagConditions)))throw new RangeError("The IfMatch, IfNoneMatch and tags access conditions are ignored by the service. Values other than undefined or their default values are not acceptable.");O.label=1;case 1:return O.trys.push([1,3,4,5]),[4,this._containerOrBlobOperation.acquireLease({abortSignal:t.abortSignal,duration:e,modifiedAccessConditions:Object(o.a)(Object(o.a)({},t.conditions),{ifTags:null===(d=t.conditions)||void 0===d?void 0:d.tagConditions}),proposedLeaseId:this._leaseId,spanOptions:b})];case 2:return[2,O.sent()];case 3:throw p=O.sent(),u.setStatus({code:r.CanonicalCode.UNKNOWN,message:p.message}),p;case 4:return u.end(),[7];case 5:return[2]}}))}))},e.prototype.changeLease=function(e,t){var n,s,i,a,c,d;return void 0===t&&(t={}),Object(o.f)(this,void 0,void 0,(function(){var l,u,b,p,O;return Object(o.h)(this,(function(h){switch(h.label){case 0:if(l=Object(x.a)("BlobLeaseClient-changeLease",t.tracingOptions),u=l.span,b=l.spanOptions,this._isContainer&&((null===(n=t.conditions)||void 0===n?void 0:n.ifMatch)&&(null===(s=t.conditions)||void 0===s?void 0:s.ifMatch)!==B.j||(null===(i=t.conditions)||void 0===i?void 0:i.ifNoneMatch)&&(null===(a=t.conditions)||void 0===a?void 0:a.ifNoneMatch)!==B.j||(null===(c=t.conditions)||void 0===c?void 0:c.tagConditions)))throw new RangeError("The IfMatch, IfNoneMatch and tags access conditions are ignored by the service. Values other than undefined or their default values are not acceptable.");h.label=1;case 1:return h.trys.push([1,3,4,5]),[4,this._containerOrBlobOperation.changeLease(this._leaseId,e,{abortSignal:t.abortSignal,modifiedAccessConditions:Object(o.a)(Object(o.a)({},t.conditions),{ifTags:null===(d=t.conditions)||void 0===d?void 0:d.tagConditions}),spanOptions:b})];case 2:return p=h.sent(),this._leaseId=e,[2,p];case 3:throw O=h.sent(),u.setStatus({code:r.CanonicalCode.UNKNOWN,message:O.message}),O;case 4:return u.end(),[7];case 5:return[2]}}))}))},e.prototype.releaseLease=function(e){var t,n,s,i,a,c;return void 0===e&&(e={}),Object(o.f)(this,void 0,void 0,(function(){var d,l,u,b;return Object(o.h)(this,(function(p){switch(p.label){case 0:if(d=Object(x.a)("BlobLeaseClient-releaseLease",e.tracingOptions),l=d.span,u=d.spanOptions,this._isContainer&&((null===(t=e.conditions)||void 0===t?void 0:t.ifMatch)&&(null===(n=e.conditions)||void 0===n?void 0:n.ifMatch)!==B.j||(null===(s=e.conditions)||void 0===s?void 0:s.ifNoneMatch)&&(null===(i=e.conditions)||void 0===i?void 0:i.ifNoneMatch)!==B.j||(null===(a=e.conditions)||void 0===a?void 0:a.tagConditions)))throw new RangeError("The IfMatch, IfNoneMatch and tags access conditions are ignored by the service. Values other than undefined or their default values are not acceptable.");p.label=1;case 1:return p.trys.push([1,3,4,5]),[4,this._containerOrBlobOperation.releaseLease(this._leaseId,{abortSignal:e.abortSignal,modifiedAccessConditions:Object(o.a)(Object(o.a)({},e.conditions),{ifTags:null===(c=e.conditions)||void 0===c?void 0:c.tagConditions}),spanOptions:u})];case 2:return[2,p.sent()];case 3:throw b=p.sent(),l.setStatus({code:r.CanonicalCode.UNKNOWN,message:b.message}),b;case 4:return l.end(),[7];case 5:return[2]}}))}))},e.prototype.renewLease=function(e){var t,n,s,i,a,c;return void 0===e&&(e={}),Object(o.f)(this,void 0,void 0,(function(){var d,l,u,b;return Object(o.h)(this,(function(p){switch(p.label){case 0:if(d=Object(x.a)("BlobLeaseClient-renewLease",e.tracingOptions),l=d.span,u=d.spanOptions,this._isContainer&&((null===(t=e.conditions)||void 0===t?void 0:t.ifMatch)&&(null===(n=e.conditions)||void 0===n?void 0:n.ifMatch)!==B.j||(null===(s=e.conditions)||void 0===s?void 0:s.ifNoneMatch)&&(null===(i=e.conditions)||void 0===i?void 0:i.ifNoneMatch)!==B.j||(null===(a=e.conditions)||void 0===a?void 0:a.tagConditions)))throw new RangeError("The IfMatch, IfNoneMatch and tags access conditions are ignored by the service. Values other than undefined or their default values are not acceptable.");p.label=1;case 1:return p.trys.push([1,3,4,5]),[4,this._containerOrBlobOperation.renewLease(this._leaseId,{abortSignal:e.abortSignal,modifiedAccessConditions:Object(o.a)(Object(o.a)({},e.conditions),{ifTags:null===(c=e.conditions)||void 0===c?void 0:c.tagConditions}),spanOptions:u})];case 2:return[2,p.sent()];case 3:throw b=p.sent(),l.setStatus({code:r.CanonicalCode.UNKNOWN,message:b.message}),b;case 4:return l.end(),[7];case 5:return[2]}}))}))},e.prototype.breakLease=function(e,t){var n,s,i,a,c,d;return void 0===t&&(t={}),Object(o.f)(this,void 0,void 0,(function(){var l,u,b,p,O;return Object(o.h)(this,(function(h){switch(h.label){case 0:if(l=Object(x.a)("BlobLeaseClient-breakLease",t.tracingOptions),u=l.span,b=l.spanOptions,this._isContainer&&((null===(n=t.conditions)||void 0===n?void 0:n.ifMatch)&&(null===(s=t.conditions)||void 0===s?void 0:s.ifMatch)!==B.j||(null===(i=t.conditions)||void 0===i?void 0:i.ifNoneMatch)&&(null===(a=t.conditions)||void 0===a?void 0:a.ifNoneMatch)!==B.j||(null===(c=t.conditions)||void 0===c?void 0:c.tagConditions)))throw new RangeError("The IfMatch, IfNoneMatch and tags access conditions are ignored by the service. Values other than undefined or their default values are not acceptable.");h.label=1;case 1:return h.trys.push([1,3,4,5]),p={abortSignal:t.abortSignal,breakPeriod:e,modifiedAccessConditions:Object(o.a)(Object(o.a)({},t.conditions),{ifTags:null===(d=t.conditions)||void 0===d?void 0:d.tagConditions}),spanOptions:b},[4,this._containerOrBlobOperation.breakLease(p)];case 2:return[2,h.sent()];case 3:throw O=h.sent(),u.setStatus({code:r.CanonicalCode.UNKNOWN,message:O.message}),O;case 4:return u.end(),[7];case 5:return[2]}}))}))},e}(),M=function(e){function t(t,n,o){var c,r,d=this;if(o=o||{},n instanceof m.a)r=t,c=n;else if(s.d&&n instanceof b.a||n instanceof u.a||Object(i.a)(n))r=t,c=Object(m.b)(n,o);else if(n||"string"==typeof n){if(!n||"string"!=typeof n)throw new Error("Expecting non-empty strings for containerName parameter");var l=n,p=Object(U.d)(t);if("AccountConnString"===p.kind){if(!s.d)throw new Error("Account connection string is only supported in Node.js environment");var O=new b.a(p.accountName,p.accountKey);r=Object(U.a)(p.url,encodeURIComponent(l)),o.proxyOptions=Object(a.a)(p.proxyUri),c=Object(m.b)(O,o)}else{if("SASConnString"!==p.kind)throw new Error("Connection string must be either an Account connection string or a SAS connection string");r=Object(U.a)(p.url,encodeURIComponent(l))+"?"+p.accountSas,c=Object(m.b)(new u.a,o)}}else r=t,c=Object(m.b)(new u.a,o);return(d=e.call(this,r,c)||this)._containerName=d.getContainerNameFromUrl(),d.containerContext=new f.a(d.storageClientContext),d}return Object(o.g)(t,e),Object.defineProperty(t.prototype,"containerName",{get:function(){return this._containerName},enumerable:!1,configurable:!0}),t.prototype.create=function(e){return void 0===e&&(e={}),Object(o.f)(this,void 0,void 0,(function(){var t,n,s,i;return Object(o.h)(this,(function(a){switch(a.label){case 0:t=Object(x.a)("ContainerClient-create",e.tracingOptions),n=t.span,s=t.spanOptions,a.label=1;case 1:return a.trys.push([1,3,4,5]),[4,this.containerContext.create(Object(o.a)(Object(o.a)({},e),{spanOptions:s}))];case 2:return[2,a.sent()];case 3:throw i=a.sent(),n.setStatus({code:r.CanonicalCode.UNKNOWN,message:i.message}),i;case 4:return n.end(),[7];case 5:return[2]}}))}))},t.prototype.createIfNotExists=function(e){var t,n;return void 0===e&&(e={}),Object(o.f)(this,void 0,void 0,(function(){var s,i,a,c,d;return Object(o.h)(this,(function(l){switch(l.label){case 0:s=Object(x.a)("ContainerClient-createIfNotExists",e.tracingOptions),i=s.span,a=s.spanOptions,l.label=1;case 1:return l.trys.push([1,3,4,5]),[4,this.create(Object(o.a)(Object(o.a)({},e),{tracingOptions:Object(o.a)(Object(o.a)({},e.tracingOptions),{spanOptions:a})}))];case 2:return c=l.sent(),[2,Object(o.a)(Object(o.a)({succeeded:!0},c),{_response:c._response})];case 3:if(d=l.sent(),"ContainerAlreadyExists"===(null===(t=d.details)||void 0===t?void 0:t.errorCode))return i.setStatus({code:r.CanonicalCode.ALREADY_EXISTS,message:"Expected exception when creating a container only if it does not already exist."}),[2,Object(o.a)(Object(o.a)({succeeded:!1},null===(n=d.response)||void 0===n?void 0:n.parsedHeaders),{_response:d.response})];throw i.setStatus({code:r.CanonicalCode.UNKNOWN,message:d.message}),d;case 4:return i.end(),[7];case 5:return[2]}}))}))},t.prototype.exists=function(e){return void 0===e&&(e={}),Object(o.f)(this,void 0,void 0,(function(){var t,n,s,i;return Object(o.h)(this,(function(a){switch(a.label){case 0:t=Object(x.a)("ContainerClient-exists",e.tracingOptions),n=t.span,s=t.spanOptions,a.label=1;case 1:return a.trys.push([1,3,4,5]),[4,this.getProperties({abortSignal:e.abortSignal,tracingOptions:Object(o.a)(Object(o.a)({},e.tracingOptions),{spanOptions:s})})];case 2:return a.sent(),[2,!0];case 3:if(404===(i=a.sent()).statusCode)return n.setStatus({code:r.CanonicalCode.NOT_FOUND,message:"Expected exception when checking container existence"}),[2,!1];throw n.setStatus({code:r.CanonicalCode.UNKNOWN,message:i.message}),i;case 4:return n.end(),[7];case 5:return[2]}}))}))},t.prototype.getBlobClient=function(e){return new k(Object(U.a)(this.url,encodeURIComponent(e)),this.pipeline)},t.prototype.getAppendBlobClient=function(e){return new I(Object(U.a)(this.url,encodeURIComponent(e)),this.pipeline)},t.prototype.getBlockBlobClient=function(e){return new T(Object(U.a)(this.url,encodeURIComponent(e)),this.pipeline)},t.prototype.getPageBlobClient=function(e){return new R(Object(U.a)(this.url,encodeURIComponent(e)),this.pipeline)},t.prototype.getProperties=function(e){return void 0===e&&(e={}),Object(o.f)(this,void 0,void 0,(function(){var t,n,s,i;return Object(o.h)(this,(function(a){switch(a.label){case 0:e.conditions||(e.conditions={}),t=Object(x.a)("ContainerClient-getProperties",e.tracingOptions),n=t.span,s=t.spanOptions,a.label=1;case 1:return a.trys.push([1,3,4,5]),[4,this.containerContext.getProperties(Object(o.a)(Object(o.a)({abortSignal:e.abortSignal},e.conditions),{spanOptions:s}))];case 2:return[2,a.sent()];case 3:throw i=a.sent(),n.setStatus({code:r.CanonicalCode.UNKNOWN,message:i.message}),i;case 4:return n.end(),[7];case 5:return[2]}}))}))},t.prototype.delete=function(e){return void 0===e&&(e={}),Object(o.f)(this,void 0,void 0,(function(){var t,n,s,i;return Object(o.h)(this,(function(o){switch(o.label){case 0:e.conditions||(e.conditions={}),t=Object(x.a)("ContainerClient-delete",e.tracingOptions),n=t.span,s=t.spanOptions,o.label=1;case 1:return o.trys.push([1,3,4,5]),[4,this.containerContext.deleteMethod({abortSignal:e.abortSignal,leaseAccessConditions:e.conditions,modifiedAccessConditions:e.conditions,spanOptions:s})];case 2:return[2,o.sent()];case 3:throw i=o.sent(),n.setStatus({code:r.CanonicalCode.UNKNOWN,message:i.message}),i;case 4:return n.end(),[7];case 5:return[2]}}))}))},t.prototype.deleteIfExists=function(e){var t,n;return void 0===e&&(e={}),Object(o.f)(this,void 0,void 0,(function(){var s,i,a,c,d;return Object(o.h)(this,(function(l){switch(l.label){case 0:s=Object(x.a)("ContainerClient-deleteIfExists",e.tracingOptions),i=s.span,a=s.spanOptions,l.label=1;case 1:return l.trys.push([1,3,4,5]),[4,this.delete(Object(o.a)(Object(o.a)({},e),{tracingOptions:Object(o.a)(Object(o.a)({},e.tracingOptions),{spanOptions:a})}))];case 2:return c=l.sent(),[2,Object(o.a)(Object(o.a)({succeeded:!0},c),{_response:c._response})];case 3:if(d=l.sent(),"ContainerNotFound"===(null===(t=d.details)||void 0===t?void 0:t.errorCode))return i.setStatus({code:r.CanonicalCode.NOT_FOUND,message:"Expected exception when deleting a container only if it exists."}),[2,Object(o.a)(Object(o.a)({succeeded:!1},null===(n=d.response)||void 0===n?void 0:n.parsedHeaders),{_response:d.response})];throw i.setStatus({code:r.CanonicalCode.UNKNOWN,message:d.message}),d;case 4:return i.end(),[7];case 5:return[2]}}))}))},t.prototype.setMetadata=function(e,t){return void 0===t&&(t={}),Object(o.f)(this,void 0,void 0,(function(){var n,s,i,a;return Object(o.h)(this,(function(o){switch(o.label){case 0:if(t.conditions||(t.conditions={}),t.conditions.ifUnmodifiedSince)throw new RangeError("the IfUnmodifiedSince must have their default values because they are ignored by the blob service");n=Object(x.a)("ContainerClient-setMetadata",t.tracingOptions),s=n.span,i=n.spanOptions,o.label=1;case 1:return o.trys.push([1,3,4,5]),[4,this.containerContext.setMetadata({abortSignal:t.abortSignal,leaseAccessConditions:t.conditions,metadata:e,modifiedAccessConditions:t.conditions,spanOptions:i})];case 2:return[2,o.sent()];case 3:throw a=o.sent(),s.setStatus({code:r.CanonicalCode.UNKNOWN,message:a.message}),a;case 4:return s.end(),[7];case 5:return[2]}}))}))},t.prototype.getAccessPolicy=function(e){return void 0===e&&(e={}),Object(o.f)(this,void 0,void 0,(function(){var t,n,s,i,a,c,d,l,u,b;return Object(o.h)(this,(function(o){switch(o.label){case 0:e.conditions||(e.conditions={}),t=Object(x.a)("ContainerClient-getAccessPolicy",e.tracingOptions),n=t.span,s=t.spanOptions,o.label=1;case 1:return o.trys.push([1,3,4,5]),[4,this.containerContext.getAccessPolicy({abortSignal:e.abortSignal,leaseAccessConditions:e.conditions,spanOptions:s})];case 2:for(i=o.sent(),a={_response:i._response,blobPublicAccess:i.blobPublicAccess,date:i.date,etag:i.etag,errorCode:i.errorCode,lastModified:i.lastModified,requestId:i.requestId,clientRequestId:i.clientRequestId,signedIdentifiers:[],version:i.version},c=0,d=i;c<d.length;c++)l=d[c],u=void 0,l.accessPolicy&&(u={permissions:l.accessPolicy.permissions},l.accessPolicy.expiresOn&&(u.expiresOn=new Date(l.accessPolicy.expiresOn)),l.accessPolicy.startsOn&&(u.startsOn=new Date(l.accessPolicy.startsOn))),a.signedIdentifiers.push({accessPolicy:u,id:l.id});return[2,a];case 3:throw b=o.sent(),n.setStatus({code:r.CanonicalCode.UNKNOWN,message:b.message}),b;case 4:return n.end(),[7];case 5:return[2]}}))}))},t.prototype.setAccessPolicy=function(e,t,n){return void 0===n&&(n={}),Object(o.f)(this,void 0,void 0,(function(){var s,i,a,c,d,l,u,b;return Object(o.h)(this,(function(o){switch(o.label){case 0:n.conditions=n.conditions||{},s=Object(x.a)("ContainerClient-setAccessPolicy",n.tracingOptions),i=s.span,a=s.spanOptions,o.label=1;case 1:for(o.trys.push([1,3,4,5]),c=[],d=0,l=t||[];d<l.length;d++)u=l[d],c.push({accessPolicy:{expiresOn:u.accessPolicy.expiresOn?Object(U.s)(u.accessPolicy.expiresOn):"",permissions:u.accessPolicy.permissions,startsOn:u.accessPolicy.startsOn?Object(U.s)(u.accessPolicy.startsOn):""},id:u.id});return[4,this.containerContext.setAccessPolicy({abortSignal:n.abortSignal,access:e,containerAcl:c,leaseAccessConditions:n.conditions,modifiedAccessConditions:n.conditions,spanOptions:a})];case 2:return[2,o.sent()];case 3:throw b=o.sent(),i.setStatus({code:r.CanonicalCode.UNKNOWN,message:b.message}),b;case 4:return i.end(),[7];case 5:return[2]}}))}))},t.prototype.getBlobLeaseClient=function(e){return new K(this,e)},t.prototype.uploadBlockBlob=function(e,t,n,s){return void 0===s&&(s={}),Object(o.f)(this,void 0,void 0,(function(){var i,a,c,d,l,u;return Object(o.h)(this,(function(b){switch(b.label){case 0:i=Object(x.a)("ContainerClient-uploadBlockBlob",s.tracingOptions),a=i.span,c=i.spanOptions,b.label=1;case 1:return b.trys.push([1,3,4,5]),[4,(d=this.getBlockBlobClient(e)).upload(t,n,Object(o.a)(Object(o.a)({},s),{tracingOptions:Object(o.a)(Object(o.a)({},s.tracingOptions),{spanOptions:c})}))];case 2:return l=b.sent(),[2,{blockBlobClient:d,response:l}];case 3:throw u=b.sent(),a.setStatus({code:r.CanonicalCode.UNKNOWN,message:u.message}),u;case 4:return a.end(),[7];case 5:return[2]}}))}))},t.prototype.deleteBlob=function(e,t){return void 0===t&&(t={}),Object(o.f)(this,void 0,void 0,(function(){var n,s,i,a,c;return Object(o.h)(this,(function(d){switch(d.label){case 0:n=Object(x.a)("ContainerClient-deleteBlob",t.tracingOptions),s=n.span,i=n.spanOptions,d.label=1;case 1:return d.trys.push([1,3,4,5]),a=this.getBlobClient(e),t.versionId&&(a=a.withVersion(t.versionId)),[4,a.delete(Object(o.a)(Object(o.a)({},t),{tracingOptions:Object(o.a)(Object(o.a)({},t.tracingOptions),{spanOptions:i})}))];case 2:return[2,d.sent()];case 3:throw c=d.sent(),s.setStatus({code:r.CanonicalCode.UNKNOWN,message:c.message}),c;case 4:return s.end(),[7];case 5:return[2]}}))}))},t.prototype.listBlobFlatSegment=function(e,t){return void 0===t&&(t={}),Object(o.f)(this,void 0,void 0,(function(){var n,s,i,a,c;return Object(o.h)(this,(function(d){switch(d.label){case 0:n=Object(x.a)("ContainerClient-listBlobFlatSegment",t.tracingOptions),s=n.span,i=n.spanOptions,d.label=1;case 1:return d.trys.push([1,3,4,5]),[4,this.containerContext.listBlobFlatSegment(Object(o.a)(Object(o.a)({marker:e},t),{spanOptions:i}))];case 2:return a=d.sent(),[2,Object(o.a)(Object(o.a)({},a),{_response:a._response,segment:Object(o.a)(Object(o.a)({},a.segment),{blobItems:a.segment.blobItems.map((function(e){return Object(o.a)(Object(o.a)({},e),{tags:Object(U.r)(e.blobTags),objectReplicationSourceProperties:Object(U.l)(e.objectReplicationMetadata)})}))})})];case 3:throw c=d.sent(),s.setStatus({code:r.CanonicalCode.UNKNOWN,message:c.message}),c;case 4:return s.end(),[7];case 5:return[2]}}))}))},t.prototype.listBlobHierarchySegment=function(e,t,n){return void 0===n&&(n={}),Object(o.f)(this,void 0,void 0,(function(){var s,i,a,c,d;return Object(o.h)(this,(function(l){switch(l.label){case 0:s=Object(x.a)("ContainerClient-listBlobHierarchySegment",n.tracingOptions),i=s.span,a=s.spanOptions,l.label=1;case 1:return l.trys.push([1,3,4,5]),[4,this.containerContext.listBlobHierarchySegment(e,Object(o.a)(Object(o.a)({marker:t},n),{spanOptions:a}))];case 2:return c=l.sent(),[2,Object(o.a)(Object(o.a)({},c),{_response:c._response,segment:Object(o.a)(Object(o.a)({},c.segment),{blobItems:c.segment.blobItems.map((function(e){return Object(o.a)(Object(o.a)({},e),{tags:Object(U.r)(e.blobTags),objectReplicationSourceProperties:Object(U.l)(e.objectReplicationMetadata)})}))})})];case 3:throw d=l.sent(),i.setStatus({code:r.CanonicalCode.UNKNOWN,message:d.message}),d;case 4:return i.end(),[7];case 5:return[2]}}))}))},t.prototype.listSegments=function(e,t){return void 0===t&&(t={}),Object(o.c)(this,arguments,(function(){var n;return Object(o.h)(this,(function(s){switch(s.label){case 0:if(!e&&void 0!==e)return[3,7];s.label=1;case 1:return[4,Object(o.e)(this.listBlobFlatSegment(e,t))];case 2:return n=s.sent(),e=n.continuationToken,[4,Object(o.e)(n)];case 3:return[4,o.e.apply(void 0,[s.sent()])];case 4:return[4,s.sent()];case 5:s.sent(),s.label=6;case 6:if(e)return[3,1];s.label=7;case 7:return[2]}}))}))},t.prototype.listItems=function(e){return void 0===e&&(e={}),Object(o.c)(this,arguments,(function(){var t,n,s,i,a,c;return Object(o.h)(this,(function(r){switch(r.label){case 0:r.trys.push([0,7,8,13]),t=Object(o.d)(this.listSegments(void 0,e)),r.label=1;case 1:return[4,Object(o.e)(t.next())];case 2:return(n=r.sent()).done?[3,6]:(s=n.value,[5,Object(o.k)(Object(o.b)(Object(o.d)(s.segment.blobItems)))]);case 3:return[4,o.e.apply(void 0,[r.sent()])];case 4:r.sent(),r.label=5;case 5:return[3,1];case 6:return[3,13];case 7:return i=r.sent(),a={error:i},[3,13];case 8:return r.trys.push([8,,11,12]),n&&!n.done&&(c=t.return)?[4,Object(o.e)(c.call(t))]:[3,10];case 9:r.sent(),r.label=10;case 10:return[3,12];case 11:if(a)throw a.error;return[7];case 12:return[7];case 13:return[2]}}))}))},t.prototype.listBlobsFlat=function(e){var t,n=this;void 0===e&&(e={});var s=[];e.includeCopy&&s.push("copy"),e.includeDeleted&&s.push("deleted"),e.includeMetadata&&s.push("metadata"),e.includeSnapshots&&s.push("snapshots"),e.includeVersions&&s.push("versions"),e.includeUncommitedBlobs&&s.push("uncommittedblobs"),e.includeTags&&s.push("tags"),""===e.prefix&&(e.prefix=void 0);var i=Object(o.a)(Object(o.a)({},e),s.length>0?{include:s}:{}),a=this.listItems(i);return(t={next:function(){return a.next()}})[Symbol.asyncIterator]=function(){return this},t.byPage=function(e){return void 0===e&&(e={}),n.listSegments(e.continuationToken,Object(o.a)({maxPageSize:e.maxPageSize},i))},t},t.prototype.listHierarchySegments=function(e,t,n){return void 0===n&&(n={}),Object(o.c)(this,arguments,(function(){var s;return Object(o.h)(this,(function(i){switch(i.label){case 0:if(!t&&void 0!==t)return[3,7];i.label=1;case 1:return[4,Object(o.e)(this.listBlobHierarchySegment(e,t,n))];case 2:return s=i.sent(),t=s.continuationToken,[4,Object(o.e)(s)];case 3:return[4,o.e.apply(void 0,[i.sent()])];case 4:return[4,i.sent()];case 5:i.sent(),i.label=6;case 6:if(t)return[3,1];i.label=7;case 7:return[2]}}))}))},t.prototype.listItemsByHierarchy=function(e,t){return void 0===t&&(t={}),Object(o.c)(this,arguments,(function(){var n,s,i,a,c,r,d,l,u,b,p,O,h;return Object(o.h)(this,(function(g){switch(g.label){case 0:g.trys.push([0,14,15,20]),n=Object(o.d)(this.listHierarchySegments(e,void 0,t)),g.label=1;case 1:return[4,Object(o.e)(n.next())];case 2:if((s=g.sent()).done)return[3,13];if(i=s.value,!(a=i.segment).blobPrefixes)return[3,7];c=0,r=a.blobPrefixes,g.label=3;case 3:return c<r.length?(d=r[c],[4,Object(o.e)(Object(o.a)({kind:"prefix"},d))]):[3,7];case 4:return[4,g.sent()];case 5:g.sent(),g.label=6;case 6:return c++,[3,3];case 7:l=0,u=a.blobItems,g.label=8;case 8:return l<u.length?(b=u[l],[4,Object(o.e)(Object(o.a)({kind:"blob"},b))]):[3,12];case 9:return[4,g.sent()];case 10:g.sent(),g.label=11;case 11:return l++,[3,8];case 12:return[3,1];case 13:return[3,20];case 14:return p=g.sent(),O={error:p},[3,20];case 15:return g.trys.push([15,,18,19]),s&&!s.done&&(h=n.return)?[4,Object(o.e)(h.call(n))]:[3,17];case 16:g.sent(),g.label=17;case 17:return[3,19];case 18:if(O)throw O.error;return[7];case 19:return[7];case 20:return[2]}}))}))},t.prototype.listBlobsByHierarchy=function(e,t){var n,s=this;if(void 0===t&&(t={}),""===e)throw new RangeError("delimiter should contain one or more characters");var i=[];t.includeCopy&&i.push("copy"),t.includeDeleted&&i.push("deleted"),t.includeMetadata&&i.push("metadata"),t.includeSnapshots&&i.push("snapshots"),t.includeVersions&&i.push("versions"),t.includeUncommitedBlobs&&i.push("uncommittedblobs"),t.includeTags&&i.push("tags"),""===t.prefix&&(t.prefix=void 0);var a=Object(o.a)(Object(o.a)({},t),i.length>0?{include:i}:{}),c=this.listItemsByHierarchy(e,a);return(n={next:function(){return Object(o.f)(this,void 0,void 0,(function(){return Object(o.h)(this,(function(e){return[2,c.next()]}))}))}})[Symbol.asyncIterator]=function(){return this},n.byPage=function(t){return void 0===t&&(t={}),s.listHierarchySegments(e,t.continuationToken,Object(o.a)({maxPageSize:t.maxPageSize},a))},n},t.prototype.getContainerNameFromUrl=function(){var e;try{var t=c.a.parse(this.url);if(e="blob"===t.getHost().split(".")[1]?t.getPath().split("/")[1]:Object(U.k)(t)?t.getPath().split("/")[2]:t.getPath().split("/")[1],!(e=decodeURIComponent(e)))throw new Error("Provided containerName is invalid.");return e}catch(n){throw new Error("Unable to extract containerName with provided information.")}},t}(w.a)}).call(this,n("HDXh").Buffer)}}]);
//# sourceMappingURL=fc4ae798-a7cc843b575a5d4855aa.js.map